"""Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT."""

from glean import Glean, models
import os
from tests.test_client import create_test_http_client


def test_datasources_post_api_index_v1_adddatasource():
    test_http_client = create_test_http_client("post_/api/index/v1/adddatasource")

    with Glean(
        server_url=os.getenv("TEST_SERVER_URL", "http://localhost:18080"),
        client=test_http_client,
        bearer_auth=os.getenv("GLEAN_BEARER_AUTH", "value"),
    ) as g_client:
        assert g_client is not None

        g_client.indexing.datasources.add(
            name="<value>",
            url_regex="https://example-company.datasource.com/.*",
            quicklinks=[
                {
                    "icon_config": {
                        "color": "#343CED",
                        "key": "person_icon",
                        "icon_type": models.IconType.GLYPH,
                        "name": "user",
                    },
                },
                {
                    "icon_config": {
                        "color": "#343CED",
                        "key": "person_icon",
                        "icon_type": models.IconType.GLYPH,
                        "name": "user",
                    },
                },
            ],
        )


def test_datasources_post_api_index_v1_getdatasourceconfig():
    test_http_client = create_test_http_client("post_/api/index/v1/getdatasourceconfig")

    with Glean(
        server_url=os.getenv("TEST_SERVER_URL", "http://localhost:18080"),
        client=test_http_client,
        bearer_auth=os.getenv("GLEAN_BEARER_AUTH", "value"),
    ) as g_client:
        assert g_client is not None

        res = g_client.indexing.datasources.retrieve_config(datasource="<value>")
        assert res is not None
